# Структури и Класове

## 1️⃣ Структури (Structs)

### Основна концепция

Структурата е потребителски дефиниран тип данни, който групира логически свързани данни под едно име. За разлика от масивите, структурите могат да съдържат различни типове данни.

### Синтаксис

```cpp
struct ИмеНаСтруктура {
    тип1 член1;
    тип2 член2;
    // ...
};
```

### Детайлно разглеждане

#### 1. Деклариране на структури

```cpp
struct Точка {
    int x;
    int y;
};

// Алтернативен синтаксис с typedef
typedef struct {
    int x;
    int y;
} Точка;
```

#### 2. Създаване на променливи

```cpp
Точка т1;          // Декларация
Точка т2 = {5, 3}; // Декларация с инициализация
Точка* ptr = &т1;  // Указател към структура
```

#### 3. Достъп до членове

```cpp
т1.x = 10;         // Директен достъп
т1.y = 20;
ptr->x = 15;       // Достъп чрез указател
(*ptr).y = 25;     // Алтернативен синтаксис с указател
```

#### 4. Влагане на структури

```cpp
struct Правоъгълник {
    Точка горенЛявЪгъл;
    Точка доленДесенЪгъл;
};
```

#### 5. Масиви от структури

```cpp
Точка точки[100];              // Статичен масив
Точка* динТочки = new Точка[n]; // Динамичен масив
```

#### 6. Функции и структури

```cpp
// Подаване по стойност
void преместиТочка(Точка т) {
    т.x += 10;
    т.y += 10;
}

// Подаване по референция
void преместиТочка(Точка& т) {
    т.x += 10;
    т.y += 10;
}
```

#### 7. Размер на структурите

```cpp
struct Пример {
    char a;     // 1 байт
    int b;      // 4 байта
    char c;     // 1 байт
};
// sizeof(Пример) може да е > 6 заради подравняване в паметта
```

## 2️⃣ Класове (Classes)

### Основна разлика между структури и класове

1. **Контрол на достъпа**

```cpp
class Точка {
private:    // По подразбиране в класовете
    int x;
    int y;
public:
    void задайКоординати(int nx, int ny) {
        x = nx;
        y = ny;
    }
};

struct Точка {
public:     // По подразбиране в структурите
    int x;
    int y;
    void задайКоординати(int nx, int ny) {
        x = nx;
        y = ny;
    }
};
```

### Предимства на класовете

1. **Енкапсулация**

```cpp
class Банкова_Сметка {
private:
    double баланс;
public:
    void депозит(double сума) {
        if (сума > 0) баланс += сума;
    }
    bool теглене(double сума) {
        if (сума <= баланс) {
            баланс -= сума;
            return true;
        }
        return false;
    }
};
```

2. **Конструктори и Деструктори**

```cpp
class ДинамиченМасив {
private:
    int* данни;
    int размер;
public:
    // Конструктор
    ДинамиченМасив(int н_размер) {
        размер = н_размер;
        данни = new int[размер];
    }
    // Деструктор
    ~ДинамиченМасив() {
        delete[] данни;
    }
};
```

## 3️⃣ Добри практики

### При работа със структури

1. Използвайте структури когато:

   - Имате проста група от данни
   - Не се изисква сложна логика
   - Искате публичен достъп по подразбиране

2. Избягвайте:
   - Прекалено големи структури
   - Дълбоко влагане на структури
   - Сложни функции вътре в структури

### При работа с класове

1. Използвайте класове когато:

   - Имате нужда от енкапсулация
   - Имате сложна бизнес логика
   - Работите с обектно-ориентиран дизайн

2. Спазвайте:

   - Принципа на единичната отговорност
   - Енкапсулация на данните
   - Правилно управление на ресурсите

## 4️⃣ Напреднали концепции

### Подравняване на паметта

```cpp
#pragma pack(push, 1) // Принудително подравняване на 1 байт
struct Компактна {
    char a;   // 1 байт
    int b;    // 4 байта
    char c;   // 1 байт
}; // Общ размер: 6 байта
#pragma pack(pop)
```

### Обединения в структури

```cpp
struct Данни {
    union {
        int цяло;
        float дробно;
        char символ;
    } стойност;
    char тип; // Указва кой член на обединението е валиден
};
```

### Битови полета

```cpp
struct Флагове {
    unsigned int флаг1 : 1;
    unsigned int флаг2 : 1;
    unsigned int стойност : 6;
};
```

## 5️⃣ Съвети за оптимизация

1. **Подредба на членовете**

```cpp
// Лошо (повече padding)
struct Неоптимална {
    char a;
    double b;
    char c;
};

// Добро (по-малко padding)
struct Оптимална {
    double b;
    char a;
    char c;
};
```

2. **Използване на референции**

```cpp
// Избягвайте копиране на големи структури
void обработиДанни(const ГолямаСтруктура& данни);
```
